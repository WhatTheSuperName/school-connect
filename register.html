<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Регистрация - SchoolSpace</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="auth-page">
    <div class="auth-container">
        <div class="auth-header">
            <a href="index.html" class="auth-logo">
                <i class="fas fa-shield-alt"></i>
                <span>SCHOOLSPACE</span>
            </a>
            <h2>РЕГИСТРАЦИЯ</h2>
            <p>Только для учеников школы N5</p>
        </div>

        <form id="registerForm" class="auth-form">
            <!-- Выбор школы -->
            <div class="form-group">
                <label for="school">
                    <i class="fas fa-school"></i> ШКОЛА
                </label>
                <select id="school" required disabled>
                    <option value="N5">Школа N5</option>
                </select>
                <div class="form-hint">Доступна только школа N5</div>
            </div>

            <!-- Код доступа -->
            <div class="form-group">
                <label for="accessCode">
                    <i class="fas fa-key"></i> КОД ДОСТУПА ШКОЛЫ
                </label>
                <input type="text" id="accessCode" required 
                       placeholder="Введите NIG" 
                       class="code-input"
                       maxlength="3"
                       style="text-align: center; font-size: 20px; letter-spacing: 5px;">
                <div class="form-hint">Код доступа: NIG (только для школы N5)</div>
                <div class="error-message" id="codeError">
                    Неверный код доступа. Введите NIG
                </div>
            </div>

            <!-- Личная информация -->
            <div class="form-group">
                <label for="fullName">
                    <i class="fas fa-user"></i> ФАМИЛИЯ И ИМЯ
                </label>
                <input type="text" id="fullName" required 
                       placeholder="Например: Иванов Алексей">
            </div>

            <!-- Класс -->
            <div class="form-group">
                <label for="class">
                    <i class="fas fa-graduation-cap"></i> КЛАСС
                </label>
                <select id="class" required>
                    <option value="">Выберите класс</option>
                    <option value="4">4 класс</option>
                    <option value="5">5 класс</option>
                    <option value="6">6 класс</option>
                    <option value="7">7 класс</option>
                    <option value="8">8 класс</option>
                    <option value="9">9 класс</option>
                    <option value="10">10 класс</option>
                    <option value="11">11 класс</option>
                </select>
                <div class="form-hint">Только школьники 4-11 классов</div>
            </div>

            <!-- Логин/Email -->
            <div class="form-group">
                <label for="username">
                    <i class="fas fa-at"></i> ЛОГИН
                </label>
                <input type="text" id="username" required 
                       placeholder="Придумайте логин">
                <div class="form-hint">Будет использоваться для входа</div>
            </div>

            <!-- Пароль -->
            <div class="form-group">
                <label for="password">
                    <i class="fas fa-lock"></i> ПАРОЛЬ
                </label>
                <div class="password-input">
                    <input type="password" id="password" required 
                           placeholder="Создайте надежный пароль" 
                           minlength="6">
                    <button type="button" class="toggle-password">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                <div class="form-hint">Минимум 6 символов</div>
            </div>

            <!-- Подтверждение пароля -->
            <div class="form-group">
                <label for="confirmPassword">
                    <i class="fas fa-lock"></i> ПОДТВЕРЖДЕНИЕ ПАРОЛЯ
                </label>
                <div class="password-input">
                    <input type="password" id="confirmPassword" required 
                           placeholder="Повторите пароль">
                    <button type="button" class="toggle-password">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
            </div>

            <!-- Соглашения -->
            <div class="form-group">
                <label class="checkbox">
                    <input type="checkbox" id="terms" required>
                    <span>Я согласен с правилами использования и политикой конфиденциальности</span>
                </label>
                
                <label class="checkbox">
                    <input type="checkbox" id="age" required>
                    <span>Мне есть 13 лет или я получил разрешение родителей</span>
                </label>
            </div>

            <div class="error-message" id="formError">
                Пожалуйста, заполните все поля правильно
            </div>

            <button type="submit" class="btn-primary btn-block">
                <i class="fas fa-user-plus"></i> ЗАРЕГИСТРИРОВАТЬСЯ
            </button>
        </form>

        <div class="auth-footer">
            <p>Уже есть аккаунт? <a href="login.html">Войти</a></p>
            <p>Вернуться на <a href="index.html">главную</a></p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('registerForm');
            const codeInput = document.getElementById('accessCode');
            const codeError = document.getElementById('codeError');
            const formError = document.getElementById('formError');
            const toggleButtons = document.querySelectorAll('.toggle-password');
            
            // Переключение видимости паролей
            toggleButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const input = this.parentElement.querySelector('input');
                    const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
                    input.setAttribute('type', type);
                    this.innerHTML = type === 'password' ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
                });
            });
            
            // Проверка кода доступа в реальном времени
            codeInput.addEventListener('input', function() {
                const code = this.value.toUpperCase();
                if (code === 'NIG') {
                    codeError.style.display = 'none';
                    this.style.borderColor = '#26a269';
                } else if (code.length === 3) {
                    codeError.style.display = 'block';
                    this.style.borderColor = '#c01c28';
                } else {
                    codeError.style.display = 'none';
                    this.style.borderColor = '';
                }
            });
            
            // Проверка паролей
            const passwordInput = document.getElementById('password');
            const confirmInput = document.getElementById('confirmPassword');
            
            function validatePasswords() {
                if (passwordInput.value !== confirmInput.value && confirmInput.value.length > 0) {
                    confirmInput.style.borderColor = '#c01c28';
                    return false;
                } else {
                    confirmInput.style.borderColor = '';
                    return true;
                }
            }
            
            passwordInput.addEventListener('input', validatePasswords);
            confirmInput.addEventListener('input', validatePasswords);
            
            // Отправка формы
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Сброс ошибок
                codeError.style.display = 'none';
                formError.style.display = 'none';
                
                // Проверка кода доступа
                if (codeInput.value.toUpperCase() !== 'NIG') {
                    codeError.style.display = 'block';
                    codeInput.focus();
                    return;
                }
                
                // Проверка паролей
                if (!validatePasswords()) {
                    formError.textContent = 'Пароли не совпадают';
                    formError.style.display = 'block';
                    confirmInput.focus();
                    return;
                }
                
                // Проверка заполнения всех полей
                const requiredFields = form.querySelectorAll('[required]');
                let isValid = true;
                
                requiredFields.forEach(field => {
                    if (!field.value.trim()) {
                        isValid = false;
                        field.style.borderColor = '#c01c28';
                    } else {
                        field.style.borderColor = '';
                    }
                });
                
                if (!isValid) {
                    formError.textContent = 'Заполните все обязательные поля';
                    formError.style.display = 'block';
                    return;
                }
                
                // Проверка чекбоксов
                if (!document.getElementById('terms').checked || 
                    !document.getElementById('age').checked) {
                    formError.textContent = 'Необходимо принять условия';
                    formError.style.display = 'block';
                    return;
                }
                
                // Если все проверки пройдены
                formError.style.display = 'none';
                
                // Сохраняем данные (в реальности отправляем на сервер)
                const userData = {
                    school: 'N5',
                    name: document.getElementById('fullName').value,
                    class: document.getElementById('class').value,
                    username: document.getElementById('username').value,
                    registered: new Date().toISOString()
                };
                
                localStorage.setItem('schoolspace_user', JSON.stringify(userData));
                
                // Успешная регистрация
                alert('Регистрация успешна! Теперь вы можете войти в систему.');
                window.location.href = 'login.html';
            });
        });
    </script>
</body>
</html>
